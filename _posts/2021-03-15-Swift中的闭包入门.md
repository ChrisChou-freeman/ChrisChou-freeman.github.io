---
layout:     post
title:      Swiftä¸­çš„é—­åŒ…å…¥é—¨
subtitle:   SwiftåŸºç¡€ï¼ˆä¸‰ï¼‰
date:       2021-03-15
author:     ChrisChou
header-img: img/post-bg-coffee.jpeg
catalog: true
tags:
    - Swift
---

> ä¸ªäººè§‰å¾—é—­åŒ…å‡½æ•°è¿ç®—Swiftä¸­æœ€ç‰¹æ®Šï¼Œç›¸å¯¹å¤æ‚çš„ä¸€ç‚¹ï¼Œä¹Ÿæ˜¯å†™å‡ºæœ‰swiftçš„å‘³é“çš„é£æ ¼çš„ä»£ç çš„å…³é”®ä¸€ç¯ã€‚æˆ‘å°½é‡ç®€å•çš„æŒ‘å…³é”®éƒ¨åˆ†è¯´å§ï¼Œå‰©ä¸‹çš„éƒ¨åˆ†æˆ‘ç›¸ä¿¡ï¼Œéšç€ä»£ç é‡å¢åŠ ï¼Œå’Œèµ„æ–™çš„ç¿»é˜…è¡¥å……ï¼Œè‡ªç„¶å°±èƒ½ç†è§£äº†ã€‚

## Swiftä¸­çš„é—­åŒ…å…¥é—¨
é—­åŒ…å‡½æ•°ï¼Œå…¶å®å°±æ˜¯Swiftä¸­çš„åŒ¿åå‡½æ•°ï¼Œå¯ä»¥è¿™ä¹ˆç†è§£å§ï¼Œä¼¼ä¹æ˜¯Cå’ŒObject-Cçš„ç‰¹æ€§ï¼Œä»¥ä¸Šä¸¤ä¸ªè¯­è¨€æˆ‘éƒ½æ²¡æœ‰å­¦è¿‡ï¼Œå› ä¸ºæ²¡æœ‰æœºä¼šå’Œç†ç”±ç”¨ä¸Šï¼Œå¥½äº†ä¸åºŸè¯äº†ã€‚

### **é—­åŒ…çš„å†™æ³•**
è¦ç†è§£é—­åŒ…å‡½æ•°å…¶å®å‡½æ•°å¯ä»¥ä½œä¸ºå‚æ•°è¿™æ˜¯ä¸ªå…³é”®åˆ‡å…¥ç‚¹ï¼Œå¦‚æœå­¦è¿‡jså°±çŸ¥é“è€çš„è¯­æ³•éƒ½å–œæ¬¢ç”¨callbackå‡½æ•°ï¼Œåæ¥å› ä¸ºç§ç§è®©äººå¤´ç–¼çš„åŸå› ï¼Œæ‰å‘å±•åˆ°åé¢çš„asyncç¼–ç¨‹é£æ ¼ã€‚è¿™é‡Œç”¨å‡ ä¸ªswiftå®˜æ–¹çš„æ–‡æ¡£ä»£ç æ¥ä½œä¸ºä¾‹å­ã€‚

### arrayçš„sorted æ–¹æ³•
arrayæœ‰ä¸€ä¸ªsortedæ–¹æ³•ç”¨äºæ’åºï¼Œå®ƒå¯ä»¥æ¥å—ä¸€ä¸ªtagä¸ºbyçš„å‡½æ•°ä½œä¸ºæ’åºæ¡ä»¶å‡½æ•°ï¼Œå¤§éƒ¨åˆ†ç¼–ç¨‹è¯­è¨€å‡ ä¹éƒ½æœ‰è¿™ä¸ªarrayçš„æ–¹æ³•ã€‚
```swift
let names = ["Chris", "Alex", "Ewa", "Barry", "Daniella"]
func backward(_ s1: String, _ s2: String) -> Bool {
    return s1 > s2
}
var reversedNames = names.sorted(by: backward)
// reversedNames is equal to ["Ewa", "Daniella", "Chris", "Barry", "Alex"]
```
åœ¨è¿™ä¸ªæ–¹æ³•ä¸­åªè¦s1 > s2æˆç«‹ï¼Œé‚£ä¹ˆs1 å°±ä¼šåœ¨s2å‰é¢ã€‚ è¿™ä¸ªä¾‹å­å°±æ˜¯å‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’ã€‚ä½†æ˜¯swiftæ˜¯å¯ä»¥ç›´æ¥ä¼ é€’ä¸€ä¸ªåŒ¿åå‡½æ•°é—­åŒ…çš„, å°±åƒjsä¸€æ ·ï¼Œè¯­æ³•å¦‚ä¸‹
```swift
{ (parameters) -> return type in
    statements
}
```
æ‰€ä»¥sortedå¯ä»¥å†™æˆ
```swift
reversedNames = names.sorted(by: { (s1: String, s2: String) -> Bool in
    return s1 > s2
})
```
ç”±äºswiftæ˜¯æ”¯æŒç±»å‹æ¨ç†çš„ï¼Œæ‰€ä»¥ç±»å‹å£°æ˜å…¶å®æ˜¯å¯ä»¥çœå»çš„ï¼Œå› ä¸ºarrayå¯ä»¥é æœ¬èº«çš„æˆå‘˜æ¥æ¨å¯¼ç±»å‹ï¼Œè¿˜æœ‰returnçš„è¿ç®—ä¹Ÿæ˜¯å¯ä»¥æ¨å¯¼å‡ºboolç±»å‹çš„ï¼Œæ‰€ä»¥å¯ä»¥ç®€å†™ç±»å‹æˆä¸€è¡Œï¼Œ å¯¹äº†è¿™é‡ŒæŠŠå‚æ•°çš„åœ†æ‹¬å·ä¹Ÿç»™ç®€åŒ–æ‰äº†
```swift
reversedNames = names.sorted(by: { s1, s2 in return s1 > s2 })
```
å…¶å®è¿˜èƒ½å¤Ÿå†è¿›ä¸€æ­¥ç®€åŒ–ï¼Œåœ¨å•è¡Œè¡¨è¾¾å¼ä¸­returnæ˜¯å¯ä»¥ç®€åŒ–æ‰çš„
```swift
reversedNames = names.sorted(by: { s1, s2 in s1 > s2 })
```
æ˜¯ä¸æ˜¯å¾ˆç®€æ´äº†ï¼Ÿç­‰ç­‰ï¼Œè¿˜æœ‰æ›´ç®€æ´çš„ï¼Œç›´æ¥çœå»è¡Œå‚ç”¨å¿«æ·ä½ç½®å‚æ•°
```swift
reversedNames = names.sorted(by: { $0 > $1 } )
```
å½“ä½ ä»¥ä¸ºå·²ç»ä¸èƒ½å†ç®€å•çš„æ—¶å€™ï¼Œç­‰ç­‰...è¿˜æœ‰æ“ä½œç¬¦æ–¹æ³•ğŸ¶
```swift
reversedNames = names.sorted(by: >)
```
ä¸ç®¡ä½ æ€ä¹ˆæƒ³çš„ï¼Œæˆ‘æ˜¯å¾ˆæœæ°”äº†ï¼ŒèŠ±æ ·æœ‰ç‚¹å¤šè¿‡å¤´äº†ã€‚ã€‚ã€‚
### **å°¾éƒ¨é—­åŒ…ï¼Œå¦ä¸€ç§é—­åŒ…**
é—­åŒ…é™¤äº†å¯ä»¥é€šè¿‡å‚æ•°æ¥ä¼ å…¥ï¼Œè¿˜å¯ä»¥é€šè¿‡å°¾éƒ¨é—­åŒ…çš„æ–¹å¼ä¼ å…¥ï¼Œæ˜¯çš„å°±æ˜¯è¿™ä¹ˆç¥å¥‡ï¼Œswiftæ˜¯ä¸æ˜¯æœ‰ç‚¹è¿‡äºèŠ±é‡Œèƒ¡å“¨äº†ã€‚

ä¾‹å­
```swift
func someFunctionThatTakesAClosure(closure: () -> Void) {
}

someFunctionThatTakesAClosure(closure: {
    // æ™®é€šé—­åŒ…ä½œä¸ºå‚æ•°ä¼ å…¥
})

someFunctionThatTakesAClosure() {
    // å°¾éƒ¨é—­åŒ…ä¼ å…¥å†™æ³•
}
```
ä¸Šé¢ä¼ å…¥çš„sortedé—­åŒ…å‡½æ•°å¯ä»¥ç”¨å°¾éƒ¨é—­åŒ…çš„æ–¹å¼å†™
```swift
reversedNames = names.sorted() { $0 > $1 }
```
å¦‚æœåªæ˜¯éœ€è¦ä¼ å…¥å°¾éƒ¨é—­åŒ…è€Œä¸éœ€è¦ä¼ å…¥å…¶ä»–å‚æ•°ï¼Œå¯ä»¥çœå»æ‹¬å·
```swift
reversedNames = names.sorted { $0 > $1 }
```
### **å¤šå°¾éƒ¨é—­åŒ…**
å½“æœ‰å¤šä¸ªé—­åŒ…å‡½æ•°ä¼ å…¥çš„æ—¶å€™å°±å¯ä»¥ç”¨å¤šå°¾éƒ¨é—­åŒ…çš„å†™æ³•

å¤šé—­åŒ…å‡½æ•°å‚æ•°
```swift
func loadPicture(from server: Server, completion: (Picture) -> Void, onFailure: () -> Void) {
    if let picture = download("photo.jpg", from: server) {
        completion(picture)
    } else {
        onFailure()
    }
}
```
å¤šå°¾éƒ¨é—­åŒ…è°ƒç”¨æ–¹å¼
```swift
loadPicture(from: someServer) { picture in
    someView.currentPicture = picture
} onFailure: {
    print("Couldn't download the next picture.")
}
```

ä»¥ä¸Š